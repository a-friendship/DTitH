<!DOCTYPE HTML>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>A Friendship</title>
    <link rel="icon" type="image/x-icon" href="imgs/favicon.ico">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- only team section -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> <!-- only team section -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Local stylesheet and javascript -->
    <link rel="stylesheet" href="css/maincss.css" >
    <script src="js/scripts.js"></script>
</head>

<body>
    <header>
        <!-- First navbar -->
        <nav class="navbar navbar-expand-md navbar-light bg-light">
            <div class="container">
                <div id="DLStitle">
                    <img id="logo" src="./imgs/icon.jpg" />
                    <a class="navbar-brand" href="index.html">A Friendship</a>
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse navbar-menu" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Issues</a>
                            <div class="dropdown-menu dropdown-menu-end animate slideIn" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="lamicagenialeprova.html">Digital Edition</a>
                                <a class="dropdown-item" href="timeline.html">Timeline</a>
                                <a class="dropdown-item" onclick="missingIssue()">Network Analysis</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="documentation.html">Documentation</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#projectinfo">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="hero-image1">
    </div>
<article>
    <iframe src='https://cdn.knightlab.com/libs/timeline3/latest/embed/index.html?source=1W97-YxS10yiHy13i_VQsz51fqXExpFyedkbj8ZCZ-1w&font=OldStandard&lang=en&hash_bookmark=true&initial_zoom=2&height=650' width='100%' height='650' webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder='0'></iframe>
        </article>
    </div>


    <!-- Footer -->
    <footer class="py-3 my-4">
        <div class="text-center p-3">
            MA "Digital Humanities and Digital Knowledge", University of Bologna <br>
            Course "Digital Text in the Humanities" <br>

            <div>
                <small>Powered by Bootstrap</small>
                <a class="btn btn-link btn-floating btn-lg text-dark m-1"
                    href="https://github.com/deadloversociety/imwt22.git" role="button" data-mdb-ripple-color="white">
                    <i class="fa fa-github" id="whitecat"></i>
                </a><br>
            </div>
            <p class="text-center">&copy; 2022 A Friendship</p>
    </footer>
    <!-- Così parte quando è caricata tutta la pagina -->
     <script>
        String.prototype.tpl = function (o) {
            var r = this;
            for (var i in o) {
                r = r.replace(new RegExp("\\$" + i, 'g'), o[i])
            }
            return r
        }

        var listItemTpl = `<li><a href='#articles' onclick='load("$url")'>$label</a></li>`

        $(document).ready(main);

        function main() {
            $.ajax({
                method: 'GET',
                url: 'https://a-friendship.github.io/DTitH/lamicageniale.json',
                success: function (d) {
                    for (var i = 0; i < d.length; i++) {
                        $('#list').append(listItemTpl.tpl({
                            url: d[i].url,
                            label: d[i].label
                        }))
                    }
                },
                error: function () {
                    alert('No document to show')
                }
            });


            $('#showpersnames').click(function () {
                if (this.checked)
                    $('.pers-name').addClass('text-persname')
                else
                    $('.pers-name').removeClass('text-persname')
            })
            $('#showdates').click(function () {
                if (this.checked)
                    $('.date').addClass('text-date')
                else
                    $('.date').removeClass('text-date')
            })
         


        }

        function load(file) {
            $.ajax({
                method: 'GET',
                url: file,
                success: function (d) {
                    $('#file').html(d)
                    $('.show').prop("checked", false)
                    addIds()
                    filltabs()
                },
                error: function () {
                    alert('Could not load file ' + file)
                }
            });
        }

        function addIds() {
            addId('.pers-name', 'pers-name')
            addId('.date', 'date')
      

        }

        function addId(what, prefix) {
            var id = '0'
            var elements = $(what);
            for (var i = 0; i < elements.length; i++) {
                elements[i].id = prefix + "-" + id++
            }
        }

        function filltabs() {
            filltab("#file .pers-name", "list-pers-name", "#pers-name")
            filltab("#file .date", "list-date", "#date")

        }

        function filltab(what, style, where) {
            var list = `<li class="list $style"><a href="#" onclick="goto('$place')">$content</a></li>`
            var elements = $(what);
            $(where + ' ul').empty();
            for (var i = 0; i < elements.length; i++) {
                $(where + ' ul').append(list.tpl({
                    style: style,
                    place: '#' + elements[i].id,
                    content: elements[i].innerHTML
                }))
            }
        }
        function goto(id) {
            var t = $(id)[0].offsetTop;
            $('html').animate({ scrollTop: t }, 2000);
            $(id).addClass('animate1');
            setTimeout(function () {
                $(id).removeClass('animate1');
            }, 5000);
        }


    </script>

</body>

</html>
